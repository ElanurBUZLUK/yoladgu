# =============================================================================
# ADAPTIVE LEARNING SYSTEM - ENVIRONMENT CONFIGURATION
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env file to version control!

# =============================================================================
# APP CONFIGURATION
# =============================================================================
APP_NAME="Adaptive Question System"
VERSION="1.0.0"
ENVIRONMENT="development"  # development, testing, production
DEBUG=true

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DATABASE_URL="postgresql://username:password@localhost:5432/adaptive_learning"
TEST_DATABASE_URL="postgresql://username:password@localhost:5432/adaptive_learning_test"

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_URL="redis://localhost:6379/0"

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Generate secure keys: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY="your-secret-key-change-in-production"
JWT_SECRET="your-jwt-secret-change-in-production"
ENCRYPTION_KEY="your-encryption-key-change-in-production"
JWT_ALGORITHM="HS256"
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
JWT_ISSUER="adaptive-learning-system"
JWT_AUDIENCE="adaptive-learning-users"

# =============================================================================
# LLM API KEYS - SECURE CONFIGURATION
# =============================================================================
# OpenAI API Key (https://platform.openai.com/api-keys)
OPENAI_API_KEY="sk-..."

# Anthropic API Key (https://console.anthropic.com/)
ANTHROPIC_API_KEY="sk-ant-..."

# LLM Configuration
PRIMARY_LLM_PROVIDER="gpt4"
SECONDARY_LLM_PROVIDER="claude_haiku"
DAILY_LLM_BUDGET=100.0

# LLM Fallback Settings
ENABLE_LLM_FALLBACK=true
FALLBACK_TO_TEMPLATES=true
MAX_RETRY_ATTEMPTS=3
LLM_TIMEOUT_SECONDS=30
LLM_HEALTH_CHECK_INTERVAL=300

# =============================================================================
# EMBEDDING CONFIGURATION
# =============================================================================
EMBEDDING_MODEL="text-embedding-3-small"
LOCAL_EMBEDDING_MODEL="bge-small-en"
PGVECTOR_DIM=1536
EMBEDDING_CACHE_TTL=3600
EMBEDDING_BATCH_SIZE=100
EMBEDDING_RATE_LIMIT_DELAY=0.1

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ORIGINS="http://localhost:3000,http://localhost:4200"
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# FILE UPLOAD & STORAGE
# =============================================================================
MAX_FILE_SIZE=10485760  # 10MB in bytes
UPLOAD_DIR="./uploads"
STORAGE_BACKEND="local"  # local, s3, minio

# S3/MinIO Configuration (if using cloud storage)
S3_ENDPOINT_URL="https://s3.amazonaws.com"
S3_ACCESS_KEY_ID="your-access-key"
S3_SECRET_ACCESS_KEY="your-secret-key"
S3_BUCKET_NAME="adaptive-learning-uploads"
S3_REGION="us-east-1"
S3_USE_SSL=true

# =============================================================================
# RATE LIMITING
# =============================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_REQUESTS_PER_HOUR=1000
RATE_LIMIT_REQUESTS_PER_DAY=10000
RATE_LIMIT_BURST_SIZE=10
RATE_LIMIT_STORAGE_BACKEND="redis"

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================
PROMETHEUS_ENABLED=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH="/metrics"
LOG_LEVEL="info"  # debug, info, warning, error, critical
LOG_FORMAT="json"
LOG_FILE="./logs/app.log"
LOG_MAX_SIZE=104857600  # 100MB
LOG_BACKUP_COUNT=5

# =============================================================================
# MCP (Model Context Protocol) SETTINGS
# =============================================================================
MCP_SERVER_URL="http://localhost:3001"
MCP_TIMEOUT=30
USE_MCP_DEMO=false

# =============================================================================
# VECTOR DATABASE SETTINGS
# =============================================================================
PGVECTOR_ENABLED=true
VECTOR_SIMILARITY_THRESHOLD=0.7
EMBEDDING_DIM=1536
VECTOR_BATCH_SIZE=100
VECTOR_NAMESPACE_DEFAULT="default"
VECTOR_SLOT_DEFAULT=1

# =============================================================================
# CONTENT MODERATION
# =============================================================================
CONTENT_MODERATION_ENABLED=true
INJECTION_DETECTION_ENABLED=true
MAX_CONTENT_LENGTH=10000

# =============================================================================
# COST MONITORING
# =============================================================================
COST_MONITORING_ENABLED=true
USER_MONTHLY_LIMIT=50.0
ORGANIZATION_MONTHLY_LIMIT=500.0
ENDPOINT_DAILY_LIMIT=10.0
GLOBAL_DAILY_LIMIT=1000.0

# =============================================================================
# TESTING CONFIGURATION
# =============================================================================
TEST_DATA_CLEANUP=true
TEST_PARALLEL_WORKERS=4

# =============================================================================
# ELO/PFA PARAMETERS (LevelUpdateService)
# =============================================================================
ELO_K_FACTOR=0.2
ELO_TAU_FACTOR=1.0

# =============================================================================
# MATH RECOMMENDATION PARAMETERS
# =============================================================================
MATH_WEIGHT_DIFFICULTY_FIT=0.4
MATH_WEIGHT_NEIGHBOR_WRONGS=0.4
MATH_WEIGHT_DIVERSITY=0.2

# =============================================================================
# ENGLISH CLOZE GENERATION PARAMETERS
# =============================================================================
CLOZE_MAX_RETRIES=3
CLOZE_SELF_REPAIR_ATTEMPTS=2
CLOZE_DEFAULT_DIFFICULTY=3

# =============================================================================
# CEFR ASSESSMENT PARAMETERS
# =============================================================================
CEFR_MAX_RETRIES=3
CEFR_STRICT_VALIDATION=true
CEFR_CONFIDENCE_THRESHOLD=0.7

# =============================================================================
# QUESTION GENERATION PARAMETERS
# =============================================================================
USE_TEMPLATE_QUESTIONS=true
USE_GPT_QUESTIONS=true
TEMPLATE_FALLBACK=true
MAX_GPT_QUESTIONS_PER_DAY=100
GPT_CREATIVITY=0.7
QUESTION_DIVERSITY_THRESHOLD=0.8

# =============================================================================
# LANGUAGETOOL INTEGRATION
# =============================================================================
USE_LANGUAGETOOL=false
LANGUAGETOOL_URL="https://api.languagetool.org/v2/check"

# =============================================================================
# API DOCUMENTATION
# =============================================================================
API_DOCS_ENABLED=true
API_DOCS_TITLE="Adaptive Learning API"
API_DOCS_DESCRIPTION="AI-powered adaptive learning system API"
API_DOCS_VERSION="1.0.0"
API_DOCS_CONTACT_NAME="API Support"
API_DOCS_CONTACT_EMAIL="support@adaptive-learning.com"

# =============================================================================
# DEVELOPMENT OVERRIDES
# =============================================================================
# Uncomment and modify these for development/testing
# DEBUG=true
# LOG_LEVEL="debug"
# ENABLE_LLM_FALLBACK=true
# FALLBACK_TO_TEMPLATES=true
